# ğŸš€ Claude Relay Service éƒ¨ç½²è¯´æ˜

## ğŸ“‹ æ‰€éœ€æ–‡ä»¶

åªéœ€è¦ä»¥ä¸‹æ–‡ä»¶å³å¯å®Œæˆéƒ¨ç½²ï¼š
```
docker-compose.deploy.yml  # Dockerç¼–æ’é…ç½®
éƒ¨ç½²è¯´æ˜.md               # æœ¬è¯´æ˜æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```

## âš¡ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶åˆ°æœåŠ¡å™¨
wget https://raw.githubusercontent.com/your-repo/claude-relay-service/main/docker-compose.deploy.yml

# 2. ç›´æ¥å¯åŠ¨æœåŠ¡ï¼ˆæ‰€æœ‰é…ç½®å·²é¢„è®¾ï¼‰
docker-compose -f docker-compose.deploy.yml up -d

# 3. éªŒè¯éƒ¨ç½²
curl http://localhost:9990/health
```

## ğŸŒ è®¿é—®åœ°å€

- **ä¸»æœåŠ¡**: http://æœåŠ¡å™¨IP:9990
- **Webç®¡ç†ç•Œé¢**: http://æœåŠ¡å™¨IP:9990/web  
- **APIç«¯ç‚¹**: http://æœåŠ¡å™¨IP:9990/api/v1/messages
- **å¥åº·æ£€æŸ¥**: http://æœåŠ¡å™¨IP:9990/health

## ğŸ”§ å¯é€‰ï¼šåŒ…å«Redisç®¡ç†å·¥å…·

```bash
# å¯åŠ¨æœåŠ¡ + Redisç®¡ç†ç•Œé¢
docker-compose -f docker-compose.deploy.yml --profile tools up -d

# Redisç®¡ç†ç•Œé¢ï¼šhttp://æœåŠ¡å™¨IP:8081
# ç”¨æˆ·åï¼šadmin  å¯†ç ï¼šadmin123
```

## ğŸ“Š å›ºå®šé…ç½®è¯´æ˜

æ‰€æœ‰é…ç½®å·²ç¡¬ç¼–ç ï¼Œæ— éœ€ä¿®æ”¹ï¼š

- **ç«¯å£**: 9990 (ä¸»æœåŠ¡), 6381 (Redis), 8081 (Redisç®¡ç†)
- **JWTå¯†é’¥**: å·²é¢„è®¾32å­—ç¬¦å®‰å…¨å¯†é’¥
- **åŠ å¯†å¯†é’¥**: å·²é¢„è®¾32å­—ç¬¦åŠ å¯†å¯†é’¥
- **æ€§èƒ½ä¼˜åŒ–**: å·²å¯ç”¨API Keyç¼“å­˜ã€å“åº”å‹ç¼©ç­‰
- **æ—¶åŒº**: Asia/Shanghai
- **æ—¥å¿—**: infoçº§åˆ«ï¼Œè‡ªåŠ¨è½®è½¬

## ğŸ› ï¸ ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹çŠ¶æ€
docker-compose -f docker-compose.deploy.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.deploy.yml logs -f claude-relay

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.deploy.yml restart

# åœæ­¢æœåŠ¡
docker-compose -f docker-compose.deploy.yml down

# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
docker-compose -f docker-compose.deploy.yml pull
docker-compose -f docker-compose.deploy.yml up -d
```

## ğŸ” éªŒè¯éƒ¨ç½²

```bash
# 1. æ£€æŸ¥æ‰€æœ‰å®¹å™¨è¿è¡ŒçŠ¶æ€
docker-compose -f docker-compose.deploy.yml ps

# 2. æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:9990/health

# 3. æµ‹è¯•Webç•Œé¢
curl -I http://localhost:9990/web

# 4. æ£€æŸ¥æ—¥å¿—æ— é”™è¯¯
docker-compose -f docker-compose.deploy.yml logs claude-relay --tail=50
```

## ğŸš¨ æ•…éšœæ’é™¤

### ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
netstat -tlnp | grep 9990
# æˆ–è€…ä¿®æ”¹docker-compose.deploy.ymlä¸­çš„ç«¯å£æ˜ å°„
```

### æœåŠ¡æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥é˜²ç«å¢™
ufw allow 9990

# æ£€æŸ¥Dockerç½‘ç»œ
docker network ls | grep claude-relay-deploy
```

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
docker-compose -f docker-compose.deploy.yml logs claude-relay
docker-compose -f docker-compose.deploy.yml logs redis-deploy
```

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

å·²å¯ç”¨çš„ä¼˜åŒ–åŠŸèƒ½ï¼š
- âš¡ API KeyéªŒè¯ç¼“å­˜ (5åˆ†é’Ÿ)
- ğŸ“¦ å“åº”å†…å®¹å‹ç¼©
- ğŸ”§ Redisè¿æ¥æ± ä¼˜åŒ– (2-20è¿æ¥)
- ğŸ“Š å®æ—¶æ€§èƒ½ç›‘æ§
- ğŸ›¡ï¸ å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨é‡å¯

## âœ… éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] å®¹å™¨å…¨éƒ¨å¯åŠ¨ (`docker-compose ps`)
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡ (`curl http://localhost:9990/health`)
- [ ] Webç•Œé¢å¯è®¿é—® (`curl -I http://localhost:9990/web`)
- [ ] Redisè¿æ¥æ­£å¸¸ (æ—¥å¿—æ— Redisé”™è¯¯)
- [ ] é˜²ç«å¢™ç«¯å£å¼€æ”¾ (`ufw status`)

å®Œæˆä»¥ä¸Šæ£€æŸ¥åï¼ŒClaude Relay Service å³å¯æ­£å¸¸ä½¿ç”¨ï¼

---

**é•œåƒç‰ˆæœ¬**: luzhipeng728/claude-relay-service:latest  
**é…ç½®**: æ‰€æœ‰å‚æ•°å·²ä¼˜åŒ–é¢„è®¾ï¼Œå¼€ç®±å³ç”¨